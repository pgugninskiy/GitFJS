
<style type="text/css">
  table {
    
    font-size: 14px;
    border-collapse: collapse;
    text-align: center;
    margin-left: 1em;
    }
  td {
    vertical-align: middle;
    padding: 10px;
    font-size: 14px;
    text-align: center;
    border-top: 2px solid #56433D;
    border-bottom: 2px solid #56433D;
    border-right: 2px solid #56433D;
    border-left: 2px solid #56433D;
    width: 50px;
    height: 50px;
    }

  tr:first-child {
    font-weight: bold;
    font-size: 14px;
    }

  tr:second-child {
    
    font-size: 14px;
    }

  select {
     margin: 1em;
  }
  .block {
    display: inline;
  }

</style>

<div class="block">
  <div class="block">
    <select name="select"> 
      <option id="value1"></option>
      <option id="value2">2017</option>
      <option id="value3">2018</option>
      <option id="value4">2019</option>
    </select>
  </div>

  <div class="block">
    <button name="button" id="btn">Загрузить отчет</button>
  </div>
</div>


<table >
  <tr>
    <td>1кв.</td>
    <td>2кв.</td>
    <td>3кв.</td>
    <td>4кв.</td>
  </tr>
  <tr id = "classQ">
    <td id="Q1"></td>
    <td id="Q2"></td>
    <td id="Q3"></td>
    <td id="Q4"></td>
  </tr>  
</table>
<div id = "link" style="margin-top: 3em; margin-left: 1em;">
  
</div>

<script >
  
// Создаем экзепляр класса XMLHttpRequest
let xhr = new XMLHttpRequest();
// Инициализируем запрос
xhr.open('GET', 'https://raw.githubusercontent.com/pgugninskiy/GitFJS/master/14.3/data.json')

// // Отправляем запрос

xhr.send();

// Создаем объект для хранения результата запроса
let dataJSON = []
xhr.onload = () => {dataJSON = JSON.parse(xhr.response);}

// Инициализируем переменные для хранения ссылок на объекты ДОМа
let selectYear = document.getElementsByTagName("select")
let btn = document.getElementById("btn")
let Quartal = document.getElementById("classQ")

// let Q1 = document.getElementById("Q1")
// let Q2 = document.getElementById("Q2")
// let Q3 = document.getElementById("Q3")
// let Q4 = document.getElementById("Q4")

//Добавляем обработчик для кнопки
btn.onclick = () => {
    for (let i = 0; i < 4; i++){
      console.log(dataJSON[i])
    }






   // if (selectYear[0].value == "") {
   //    alert("Выберите, пожалуйста, год")
   //    } else if (selectYear[0].value == "2017") {
   //        Q1.innerText = dataJSON[0].sales["q1"]
   //        Q2.innerText = dataJSON[0].sales["q2"]
   //        Q3.innerText = dataJSON[0].sales["q3"]
   //        Q4.innerText = dataJSON[0].sales["q4"]
   //    } else if (selectYear[0].value == "2018") {
   //        Q1.innerText = dataJSON[1].sales["q1"]
   //        Q2.innerText = dataJSON[1].sales["q2"]
   //        Q3.innerText = dataJSON[1].sales["q3"]
   //        Q4.innerText = dataJSON[1].sales["q4"]
   //    } else if (selectYear[0].value == "2019") {
   //        Q1.innerText = dataJSON[2].sales["q1"]
   //        Q2.innerText = dataJSON[2].sales["q2"]
   //        Q3.innerText = dataJSON[2].sales["q3"]
   //        Q4.innerText = dataJSON[2].sales["q4"]
   //    }
//Добавляем новый элемент на страницу после нажатия на кнопку
      const content = "Привет!"
      const parent = document.getElementById("link");

// добавляем ссылку для перехода на визуализцию данных
      if (selectYear[0].value != "") {
      parent.innerHTML = `<a href="https://quickchart.io/chart?c=
{
  type:'bar',
  data:
    {
      labels:['1кв','2кв','3кв','4кв'], 
      datasets:[
          {
          label:'Выручка за ${selectYear[0].value} год',
          data:['${Q1.textContent}','${Q2.textContent}','${Q3.textContent}','${Q4.textContent}'],
          backgroundColor: 'rgb(75, 192, 192)',
          borderColor: 'rgb(255, 99, 132)',
          }
          ]
    }
}"> Открыть график </a>`;
}
}

</script>